# ãƒœã‚¹è¿½åŠ ã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€ElnalFTB ã«æ–°ã—ã„ãƒœã‚¹ã‚’è¿½åŠ ã™ã‚‹ãŸã‚ã®åŒ…æ‹¬çš„ãªã‚¬ã‚¤ãƒ‰ã§ã™ã€‚

> **ğŸš€ é‡è¦ãªæ›´æ–°æƒ…å ±ï¼ˆ2024å¹´7æœˆï¼‰**  
> **Vite glob import**ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚Šã€ãƒœã‚¹è¿½åŠ ãŒå¤§å¹…ã«ç°¡ç´ åŒ–ã•ã‚Œã¾ã—ãŸï¼  
> å¾“æ¥å¿…è¦ã ã£ãŸæ‰‹å‹•è¨­å®šãŒã»ã¼ä¸è¦ã«ãªã‚Šã€ãƒœã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã ã‘ã§è‡ªå‹•çš„ã«ã‚²ãƒ¼ãƒ ã«åæ˜ ã•ã‚Œã¾ã™ã€‚

## æ¦‚è¦

**ğŸš€ å¤§å¹…ç°¡ç´ åŒ–ï¼ï¼ˆ2024å¹´7æœˆæ›´æ–°ï¼‰**

æ–°ã—ã„ãƒœã‚¹ã‚’è¿½åŠ ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚¹ãƒ†ãƒƒãƒ—ãŒå¿…è¦ã§ã™ï¼š

1. **ãƒœã‚¹ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ**ï¼ˆãƒ¡ã‚¤ãƒ³ä½œæ¥­ï¼‰
2. ~~ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›´æ–°~~ï¼ˆâŒ **ä¸è¦ï¼** è‡ªå‹•æ¤œå‡ºï¼‰
3. ~~HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®æ›´æ–°~~ï¼ˆâŒ **ä¸è¦ï¼** è‡ªå‹•ç”Ÿæˆï¼‰
4. å¿…è¦ã«å¿œã˜ã¦æ–°ã—ã„çŠ¶æ…‹ç•°å¸¸ã®è¿½åŠ 

**Vite glob import**ã«ã‚ˆã‚Šã€ãƒœã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã ã‘ã§è‡ªå‹•çš„ã«ã‚²ãƒ¼ãƒ ã«åæ˜ ã•ã‚Œã¾ã™ã€‚

## å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«

- `src/game/data/bosses/{boss-id}.ts` - æ–°ãƒœã‚¹ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ« **ï¼ˆã“ã‚Œã ã‘ï¼ï¼‰**
- ~~`src/game/data/index.ts`~~ - âŒ **æ›´æ–°ä¸è¦**ï¼ˆè‡ªå‹•æ¤œå‡ºï¼‰
- EJSãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚‹HTMLè‡ªå‹•ç”Ÿæˆï¼ˆæ‰‹å‹•ç·¨é›†ä¸è¦ï¼‰
- `src/styles/main.css` - æ–°ã—ã„çŠ¶æ…‹ç•°å¸¸ãŒã‚ã‚‹å ´åˆã®ã¿ï¼ˆæ›´æ–°ï¼‰

## ãƒœã‚¹ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### BossDataã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

```typescript
interface BossData {
    id: string;                     // ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªãƒœã‚¹ID
    name: string;                   // å†…éƒ¨åç§°
    displayName: string;            // è¡¨ç¤ºåï¼ˆçµµæ–‡å­—å«ã‚€ï¼‰
    description: string;            // çŸ­ã„èª¬æ˜
    questNote: string;              // ã‚¯ã‚¨ã‚¹ãƒˆãƒãƒ¼ãƒˆï¼ˆè©³ç´°èª¬æ˜ï¼‰
    maxHp: number;                  // æœ€å¤§HP
    attackPower: number;            // æ”»æ’ƒåŠ›
    actions: BossAction[];          // è¡Œå‹•ãƒªã‚¹ãƒˆ
    personality?: string[];         // å€‹æ€§å°è©ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
    aiStrategy?: (boss: Boss, player: Player, turn: number) => BossAction;  // AIæˆ¦ç•¥
    getDialogue?: (situation: 'battle-start' | 'player-restrained' | 'player-eaten' | 'player-escapes' | 'low-hp' | 'victory') => string;  // çŠ¶æ³åˆ¥å°è©
    finishingMove?: () => string[]; // ãƒ•ã‚£ãƒ‹ãƒƒã‚·ãƒ¥ãƒ ãƒ¼ãƒ–
    icon?: string;                  // ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆçµµæ–‡å­—ï¼‰
    guestCharacterInfo?: {          // ã‚²ã‚¹ãƒˆã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æƒ…å ±ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
        creator: string;
        source?: string;
    };
    explorerLevelRequired?: number; // ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚¢ãƒ“ãƒªãƒ†ã‚£è§£ç¦ãƒ¬ãƒ™ãƒ«ï¼ˆæœªæŒ‡å®šæ™‚ã¯0ï¼‰
}
```

### BossActionã®ç¨®é¡

#### ActionTypeåˆ—æŒ™å‹

- `Attack` - é€šå¸¸æ”»æ’ƒ
- `StatusAttack` - çŠ¶æ…‹ç•°å¸¸æ”»æ’ƒ
- `RestraintAttack` - æ‹˜æŸæ”»æ’ƒ
- `CocoonAttack` - ç¹­æ”»æ’ƒ
- `CocoonAction` - ç¹­çŠ¶æ…‹ä¸­ã®è¡Œå‹•
- `EatAttack` - é£Ÿã¹ã‚‹æ”»æ’ƒ
- `DevourAttack` - é£Ÿã¹ã‚‰ã‚ŒãŸçŠ¶æ…‹ã§ã®æ”»æ’ƒ
- `FinishingMove` - ã‚«ã‚¹ã‚¿ãƒ ã¨ã©ã‚æ”»æ’ƒ
- `PostDefeatedAttack` - ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ•—åŒ—å¾Œã®æ”»æ’ƒ
- `Skip` - è¡Œå‹•ã‚¹ã‚­ãƒƒãƒ—

#### BossActionãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

```typescript
interface BossAction {
    id?: string;                    // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å›ºæœ‰IDï¼ˆæ¨å¥¨ã€å°†æ¥å¿…é ˆåŒ–äºˆå®šï¼‰
    type: ActionType;               // è¡Œå‹•ã‚¿ã‚¤ãƒ—
    name: string;                   // è¡Œå‹•å
    description: string;            // è¡Œå‹•èª¬æ˜
    messages?: string[];            // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆ<USER>, <TARGET>, <ACTION>ã‚’ä½¿ç”¨ï¼‰
    damage?: number;                // [éæ¨å¥¨] å›ºå®šãƒ€ãƒ¡ãƒ¼ã‚¸é‡ï¼ˆdamageFormulaã‚’ä½¿ç”¨æ¨å¥¨ï¼‰
    damageFormula?: (user: Boss) => number; // ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—å¼ï¼ˆãƒœã‚¹ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã«åŸºã¥ãï¼‰
    statusEffect?: StatusEffectType; // çŠ¶æ…‹ç•°å¸¸ã‚¿ã‚¤ãƒ—
    statusDuration?: number;        // çŠ¶æ…‹ç•°å¸¸æŒç¶šã‚¿ãƒ¼ãƒ³
    weight: number;                 // AIé¸æŠé‡ã¿
    canUse?: (boss: Boss, player: Player, turn: number) => boolean;  // ä½¿ç”¨æ¡ä»¶
    onUse?: (boss: Boss, player: Player, turn: number) => string[];  // ã‚«ã‚¹ã‚¿ãƒ è¡Œå‹•ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
    hitRate?: number;               // å‘½ä¸­ç‡ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0.95ï¼‰
    criticalRate?: number;          // ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ç‡ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0.05ï¼‰
    statusChance?: number;          // çŠ¶æ…‹ç•°å¸¸ä»˜ä¸ç¢ºç‡ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1.0ã€ç¯„å›²: 0.0-1.0ï¼‰
    playerStateCondition?: 'normal' | 'ko' | 'restrained' | 'cocoon' | 'eaten' | 'defeated';  // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼çŠ¶æ…‹æ¡ä»¶
    healRatio?: number;             // HPå¸åç‡ï¼ˆ0.0-1.0ï¼‰
    damageVarianceMin?: number;     // ãƒ€ãƒ¡ãƒ¼ã‚¸åˆ†æ•£æœ€å°å€¤ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: -20ï¼‰
    damageVarianceMax?: number;     // ãƒ€ãƒ¡ãƒ¼ã‚¸åˆ†æ•£æœ€å¤§å€¤ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: +20ï¼‰
}
```

## ãƒ•ãƒ¬ãƒ¼ãƒãƒ¼è¨­å®šã®æ³¨æ„ç‚¹

### è¡¨ç¾ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

**ä»¥ä¸‹ã®è¡¨ç¾ã¯NGã¨ã—ã¾ã™**

- ã‚¨ãƒ«ãƒŠãƒ«ã«å¯¾ã™ã‚‹ç›´æ¥çš„ã§è‡´å‘½çš„ãªè¡¨ç¾
  - æ­»äº¡ã•ã›ã‚‹ã€å®Œå…¨ã«æ¶ˆåŒ–ã—ã¦ã—ã¾ã†ç­‰
- éåº¦ã«æš´åŠ›çš„ãªæå†™
  - ä½“ã‚’ãƒãƒ©ãƒãƒ©ã«ã™ã‚‹ã€å››è‚¢ã‚’åˆ‡æ–­ã™ã‚‹ç­‰

**ä»¥ä¸‹ã®è¦ç´ ã‚’ãƒœã‚¹ã«è¿½åŠ ã—ã‚ˆã†**

- æ•é£Ÿãƒ»ä¸¸å‘‘ã¿è¡¨ç¾ï¼ˆæ—¢å­˜ãƒœã‚¹ã‚’å‚è€ƒï¼‰
- çŠ¶æ…‹ç•°å¸¸ã«ã‚ˆã‚‹ä¸€æ™‚çš„ãªå½±éŸ¿
- ãƒ¦ãƒ¼ãƒ¢ã‚¢ã‚„è»½ã„é›°å›²æ°—ã‚’ä¿ã¤è¡¨ç¾
- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒæ¥½ã—ã‚ã‚‹ç¯„å›²ã§ã®è¡¨ç¾

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®é…æ…®

- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒä¸å¿«ã«æ„Ÿã˜ãªã„ç¯„å›²ã§ã®è¡¨ç¾ã‚’å¿ƒãŒã‘ã‚‹
- ã‚²ãƒ¼ãƒ ä¸–ç•Œè¦³ã«é©ã—ãŸè¡¨ç¾ã‚’ä½¿ç”¨
- æ—¢å­˜ãƒœã‚¹ã®å°è©ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å‚è€ƒã«ã™ã‚‹

## Bossã‚¯ãƒ©ã‚¹ã®é‡è¦ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

æ–°ã—ã„ãƒœã‚¹ã‚’ä½œæˆã™ã‚‹éš›ã«çŸ¥ã£ã¦ãŠãã¹ãBossã‚¯ãƒ©ã‚¹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼š

```typescript
export class Boss extends Actor {
    /**
     * ãƒœã‚¹å›ºæœ‰ã®ã‚«ã‚¹ã‚¿ãƒ å¤‰æ•°
     * AIæˆ¦ç•¥ã§ã®çŠ¶æ…‹ç®¡ç†ã€ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ç®¡ç†ã€è¡Œå‹•åˆ¶å¾¡ãªã©ã«ä½¿ç”¨
     * ãƒœã‚¹ãƒ‡ãƒ¼ã‚¿ã®åˆæœŸå€¤ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦åˆæœŸåŒ–ã•ã‚Œã‚‹
     */
    public customVariables: Record<string, any> = {};
    
    getCustomVariable<T = any>(key: string): T | undefined;
    setCustomVariable<T = any>(key: string, value: T): void;
    // ... ãã®ä»–ã®ãƒ¡ã‚½ãƒƒãƒ‰
}
```

### customVariablesã§ã®ç‰¹æ®ŠæŠ€ç®¡ç†

ãƒœã‚¹å›ºæœ‰ã®å¤‰æ•°ã‚’ç®¡ç†ã™ã‚‹ã«ã¯customVariablesã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨ã—ã¾ã™ï¼š

```typescript
// ãƒœã‚¹ãƒ‡ãƒ¼ã‚¿ã§åˆæœŸå€¤ã‚’å®šç¾©
customVariables: {
    hasUsedSpecialMove: false,   // ç‰¹æ®ŠæŠ€ä½¿ç”¨ãƒ•ãƒ©ã‚°
    specialMoveCooldown: 0       // ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ã‚¿ãƒ¼ãƒ³æ•°
},

// AIæˆ¦ç•¥ã§ä½¿ç”¨
if (!boss.getCustomVariable<boolean>('hasUsedSpecialMove')) {
    boss.setCustomVariable('hasUsedSpecialMove', true);
    boss.setCustomVariable('specialMoveCooldown', 20);
}
```

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã§ã€å¼·åŠ›ãªç‰¹æ®ŠæŠ€ã‚’ä¸€åº¦ã ã‘ä½¿ç”¨å¯èƒ½ã«ã—ãŸã‚Šã€ä½¿ç”¨å¾Œã«ä¸€å®šã‚¿ãƒ¼ãƒ³ä½¿ç”¨ä¸å¯ã«ã—ãŸã‚Šã§ãã¾ã™ã€‚

## å®Ÿè£…æ‰‹é †

### 1. æ–°ãƒœã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

`src/game/data/bosses/new-boss.ts` ã‚’ä½œæˆï¼š

```typescript
import { BossData, ActionType, BossAction } from '../../entities/Boss';
import { StatusEffectType } from '../../systems/StatusEffectTypes';

const newBossActions: BossAction[] = [
    {
        type: ActionType.Attack,
        name: 'åŸºæœ¬æ”»æ’ƒ',
        description: 'åŸºæœ¬çš„ãªæ”»æ’ƒ',
        damageFormula: (user: Boss) => user.attackPower,
        weight: 40,
        playerStateCondition: 'normal'
    },
    {
        type: ActionType.DevourAttack,
        name: 'ä½“å†…å¸å',
        description: 'ä½“å†…ã§ç²ç‰©ã®ç”Ÿå‘½åŠ›ã‚’å¸åã™ã‚‹',
        messages: [
            'ã€Œã‚°ãƒ«ãƒ«ãƒ«...ã€',
            '<USER>ãŒ<TARGET>ã®ç”Ÿå‘½åŠ›ã‚’å¸åã—ã¦ã„ã‚‹...',
            '<TARGET>ã®æœ€å¤§HPãŒæ¸›å°‘ã—ã¦ã„ã...'
        ],
        damageFormula: (user: Boss) => user.attackPower * 2.0,
        weight: 30,
        playerStateCondition: 'eaten'
    },
    {
        type: ActionType.Attack,
        name: 'ç‰¹æ®Šæ”»æ’ƒ',
        description: 'ç‰¹æ®ŠãªåŠ¹æœã‚’æŒã¤æ”»æ’ƒ',
        damageFormula: (user: Boss) => user.attackPower * 1.6,
        weight: 20,
        playerStateCondition: 'normal',
        onUse: (boss, player) => {
            // ã‚«ã‚¹ã‚¿ãƒ åŠ¹æœã®å®Ÿè£…ä¾‹
            if (Math.random() < 0.3) {
                player.statusEffects.removeEffect(StatusEffectType.Eaten);
                return ['<TARGET>ã¯æ”»æ’ƒã®è¡æ’ƒã§<USER>ã®ä½“å¤–ã«å¹ãé£›ã°ã•ã‚ŒãŸï¼'];
            }
            return [];
        }
    },
    // ãã®ä»–ã®è¡Œå‹•...
];

export const newBossData: BossData = {
    id: 'new-boss',
    name: 'NewBoss',
    displayName: 'æ–°ã—ã„ãƒœã‚¹',
    description: 'ãƒœã‚¹ã®èª¬æ˜',
    questNote: 'ã‚¯ã‚¨ã‚¹ãƒˆã®è©³ç´°èª¬æ˜...',
    maxHp: 300,
    attackPower: 15,
    actions: newBossActions,
    icon: 'ğŸ”¥',
    explorerLevelRequired: 1, // ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚¢ãƒ“ãƒªãƒ†ã‚£è§£ç¦ãƒ¬ãƒ™ãƒ«ï¼ˆå¿…è¦ã«å¿œã˜ã¦è¨­å®šï¼‰
    // å‹åˆ©æ™‚è¨˜å¿µå“ï¼ˆãƒœã‚¹ã®å¤–å´ã‹ã‚‰æ¡ã‚Œã‚‹ã‚‚ã®ï¼‰
    victoryTrophy: {
        name: 'ãƒœã‚¹ã®å¤–çš®',
        description: 'æ–°ã—ã„ãƒœã‚¹ã®å¼·é­ãªå¤–çš®ã€‚æˆ¦ã„ã®è¨¼ã¨ã—ã¦å¨å³ã‚’æ”¾ã£ã¦ã„ã‚‹ã€‚'
    },
    // æ•—åŒ—æ™‚è¨˜å¿µå“ï¼ˆãƒœã‚¹ã®ä½“å†…ã‹ã‚‰æ¡ã‚Œã‚‹ã‚‚ã®ï¼‰
    defeatTrophy: {
        name: 'ãƒœã‚¹ã®ä½“æ¶²',
        description: 'æ–°ã—ã„ãƒœã‚¹ã®ä½“å†…ã‹ã‚‰æ¡å–ã—ãŸç‰¹æ®Šãªä½“æ¶²ã€‚ç¥ç§˜çš„ãªåŠ›ãŒå®¿ã£ã¦ã„ã‚‹ã€‚'
    },
    personality: [
        'å°è©1',
        'å°è©2',
        // ...
    ],
    aiStrategy: (boss, player, turn) => {
        // AIæˆ¦ç•¥ã®å®Ÿè£…
        // ...
        return selectedAction;
    }
};

// ãƒ•ã‚£ãƒ‹ãƒƒã‚·ãƒ¥ãƒ ãƒ¼ãƒ–ã®å®Ÿè£…ä¾‹
newBossData.finishingMove = function() {
    return [
        'ã€Œã‚°ãƒ«ãƒ«ãƒ«...ã€',
        '<USER>ã¯<TARGET>ã‚’å®Œå…¨ã«åˆ¶åœ§ã—ãŸ...',
        '<TARGET>ã¯<USER>ã®æ”¯é…ä¸‹ã«ç½®ã‹ã‚Œã‚‹ã“ã¨ã«ãªã£ãŸ...'
    ];
};

// getDialogue ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ä¾‹
newBossData.getDialogue = function(situation: 'battle-start' | 'player-restrained' | 'player-eaten' | 'player-escapes' | 'low-hp' | 'victory') {
    const dialogues: Record<string, string[]> = {
        'battle-start': [
            'æ–°ã—ã„æŒ‘æˆ¦è€…ã‹...',
            'é¢ç™½ãã†ã ',
            'ç›¸æ‰‹ã«ãªã£ã¦ã‚„ã‚ã†'
        ],
        'player-restrained': [
            'é€ƒã’ã‚‰ã‚Œãªã„ã',
            'è¦³å¿µã—ã‚',
            'ã“ã‚Œã§çµ‚ã‚ã‚Šã '
        ],
        'player-eaten': [
            'ç¾å‘³ã—ãã†ã ',
            'ã‚†ã£ãã‚Šå‘³ã‚ãŠã†',
            'æ „é¤Šã«ãªã‚Œ'
        ],
        'player-escapes': [
            'ãƒãƒƒã€é€ƒã’ãŸã‹',
            'ãªã‹ãªã‹ã‚„ã‚‹ãª',
            'æ¬¡ã¯ãã†ã¯ã„ã‹ã‚“'
        ],
        'low-hp': [
            'ã¾ã çµ‚ã‚ã£ã¦ã„ãªã„ï¼',
            'ã“ã®ç¨‹åº¦ã§ã¯ï¼',
            'æœ¬æ°—ã‚’å‡ºã™ã¨ã—ã‚ˆã†'
        ],
        'victory': [
            'å‹è² ã‚ã£ãŸãª',
            'æº€è¶³ã '
        ]
    };
    
    const options = dialogues[situation] || dialogues['battle-start'];
    return options[Math.floor(Math.random() * options.length)];
};
```

### 2. ~~ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›´æ–°~~ âŒ **ä¸è¦ï¼**

**ğŸš€ 2024å¹´7æœˆæ›´æ–°**: **Vite glob import**ã«ã‚ˆã‚Šã€ã“ã®æ‰‹é †ã¯å®Œå…¨ã«ä¸è¦ã«ãªã‚Šã¾ã—ãŸï¼

~~ä»¥å‰ã®æ‰‹å‹•è¨­å®šï¼ˆç¾åœ¨ã¯ä¸è¦ï¼‰~~:
```typescript
// âŒ ä»¥ä¸‹ã¯ä¸è¦ã«ãªã‚Šã¾ã—ãŸï¼
// export const registeredBossIds: string[] = [
//     'new-boss'  // æ‰‹å‹•è¿½åŠ ä¸è¦
// ];

// âŒ ä»¥ä¸‹ã¯ä¸è¦ã«ãªã‚Šã¾ã—ãŸï¼
// case 'new-boss':
//     bossData = (await import('./bosses/new-boss')).newBossData;
//     break;
```

**âœ… ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ **: ãƒœã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã ã‘ã§è‡ªå‹•çš„ã«ä»¥ä¸‹ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ï¼š
1. **è‡ªå‹•æ¤œå‡º**: `import.meta.glob('./bosses/*.ts')`ãŒãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œå‡º
2. **è‡ªå‹•ãƒ­ãƒ¼ãƒ‰**: ãƒ•ã‚¡ã‚¤ãƒ«åã‹ã‚‰ãƒœã‚¹IDã¨exportåã‚’è‡ªå‹•ç”Ÿæˆï¼ˆ`new-boss.ts` â†’ `newBossData`ï¼‰
3. **è‡ªå‹•è¿½åŠ **: ã‚²ãƒ¼ãƒ èµ·å‹•æ™‚ã«ãƒœã‚¹é¸æŠç”»é¢ã«è‡ªå‹•ã§è¡¨ç¤º

**EJSãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ©æµ**: HTMLã®æ‰‹å‹•ç·¨é›†ã¯ä¸è¦ã§ã€ãƒœã‚¹ãƒ‡ãƒ¼ã‚¿ã®å®šç¾©ã ã‘ã§UIã«è‡ªå‹•åæ˜ ã•ã‚Œã¾ã™ã€‚

### 2. EJSãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚‹HTMLè‡ªå‹•ç”Ÿæˆ

**é‡è¦**: ãƒœã‚¹è¿½åŠ æ™‚ã¯HTMLã‚’æ‰‹å‹•ã§ç·¨é›†ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

EJSãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ãŒä»¥ä¸‹ã‚’è‡ªå‹•ã§è¡Œã„ã¾ã™ï¼š

1. **ãƒœã‚¹ã‚«ãƒ¼ãƒ‰ã®è‡ªå‹•ç”Ÿæˆ**: `registeredBossIds` é…åˆ—ã‹ã‚‰å‹•çš„ã«ãƒœã‚¹ã‚«ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ
2. **ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ãƒ¬ãƒ™ãƒ«åˆ¶å¾¡**: `explorerLevelRequired` ã«åŸºã¥ã„ã¦ãƒœã‚¹ã®è§£ç¦çŠ¶æ…‹ã‚’åˆ¶å¾¡
3. **ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤º**: ãƒœã‚¹ãƒ‡ãƒ¼ã‚¿ã® `icon` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨
4. **èª¬æ˜æ–‡è¡¨ç¤º**: ãƒœã‚¹ãƒ‡ãƒ¼ã‚¿ã® `description` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚Šã€æ–°ãƒœã‚¹ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã ã‘ã§è‡ªå‹•çš„ã«ã‚²ãƒ¼ãƒ ã«çµ„ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚

### 3. ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

ãƒœã‚¹ã‚’è¿½åŠ ã—ãŸå¾Œã€å¿…ãšä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š

```bash
npm run typecheck  # TypeScriptå‹ãƒã‚§ãƒƒã‚¯
npm run test       # Vitestå˜ä½“ãƒ†ã‚¹ãƒˆ
npm run build      # ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
```

### 4. æ–°ã—ã„çŠ¶æ…‹ç•°å¸¸ã®è¿½åŠ ï¼ˆå¿…è¦ãªå ´åˆï¼‰

#### StatusEffectTypeã«è¿½åŠ 
`src/game/systems/StatusEffectTypes.ts` ã® `StatusEffectType` enumã«è¿½åŠ 

#### åˆ©ç”¨å¯èƒ½ãªçŠ¶æ…‹ç•°å¸¸ä¸€è¦§

**åŸºæœ¬çŠ¶æ…‹ç•°å¸¸**
- `Fire` - ç«ã ã‚‹ã¾ï¼ˆæ¯ã‚¿ãƒ¼ãƒ³ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼‰
- `Poison` - æ¯’ï¼ˆæ¯ã‚¿ãƒ¼ãƒ³ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼‰
- `Charm` - é­…äº†ï¼ˆè¡Œå‹•é˜»å®³ï¼‰
- `Slow` - éˆè¶³ï¼ˆå‘½ä¸­ç‡ä½ä¸‹ï¼‰
- `Stunned` - æ°—çµ¶ï¼ˆè¡Œå‹•ä¸èƒ½ï¼‰
- `Paralysis` - éº»ç—ºï¼ˆè¡Œå‹•é˜»å®³ï¼‰
- `Sleep` - çœ ã‚Šï¼ˆè¡Œå‹•ä¸èƒ½ï¼‰
- `Confusion` - æ··ä¹±ï¼ˆè¡Œå‹•é˜»å®³ï¼‰
- `Weakness` - è¡°å¼±ï¼ˆæ”»æ’ƒåŠ›ä½ä¸‹ï¼‰
- `Darkness` - æš—é—‡ï¼ˆå‘½ä¸­ç‡å¤§å¹…ä½ä¸‹ï¼‰
- `Doomed` - å†èµ·ä¸èƒ½ï¼ˆæœ€å¤§HP0ã€ã¨ã©ã‚æ”»æ’ƒå¯¾è±¡ï¼‰

**æ–°ã—ã„çŠ¶æ…‹ç•°å¸¸**
- `VisionImpairment` - è¦–ç•Œé˜»å®³ï¼ˆæµ·ã®ã‚¯ãƒ©ãƒ¼ã‚±ãƒ³ï¼‰
- `WaterSoaked` - æ°´æ¿¡ã‚Œï¼ˆã‚¢ã‚¯ã‚¢ã‚µãƒ¼ãƒšãƒ³ãƒˆï¼‰
- `Dizzy` - ç›®çœ©ï¼ˆã‚¢ã‚¯ã‚¢ã‚µãƒ¼ãƒšãƒ³ãƒˆï¼‰
- `Soapy` - æ³¡ã¾ã¿ã‚Œï¼ˆã‚¯ãƒªãƒ¼ãƒ³ãƒã‚¹ã‚¿ãƒ¼ï¼‰
- `Spinning` - å›è»¢ï¼ˆã‚¯ãƒªãƒ¼ãƒ³ãƒã‚¹ã‚¿ãƒ¼ï¼‰
- `Steamy` - æ¹¯æ°—ã¾ã¿ã‚Œï¼ˆã‚¯ãƒªãƒ¼ãƒ³ãƒã‚¹ã‚¿ãƒ¼ï¼‰
- `Lethargy` - å€¦æ€ æ„Ÿï¼ˆã¿ã‹ã‚“ãƒ‰ãƒ©ã‚´ãƒ³ï¼‰
- `ScorpionPoison` - ã‚µã‚½ãƒªæ¯’ï¼ˆã‚¹ã‚³ãƒ¼ãƒ”ã‚ªãƒ³ã‚­ãƒ£ãƒªã‚¢ï¼‰
- `Anesthesia` - éº»é…”ï¼ˆã‚¹ã‚³ãƒ¼ãƒ”ã‚ªãƒ³ã‚­ãƒ£ãƒªã‚¢ï¼‰
- `Weakening` - å¼±ä½“åŒ–ï¼ˆã‚¹ã‚³ãƒ¼ãƒ”ã‚ªãƒ³ã‚­ãƒ£ãƒªã‚¢ï¼‰

**ç‰¹æ®Šç³»çŠ¶æ…‹ç•°å¸¸**
- `AphrodisiacPoison` - åªšè–¬æ¯’ï¼ˆãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰
- `Drowsiness` - çœ æ°—ï¼ˆãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰
- `Infatuation` - æ‹æ…•ï¼ˆãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰
- `Arousal` - èˆˆå¥®ï¼ˆãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰
- `Seduction` - èª˜æƒ‘ï¼ˆãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰
- `MagicSeal` - é­”æ³•å°å°ï¼ˆãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰
- `PleasureFall` - å¿«æ¥½å •ã¡ï¼ˆãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰
- `Lewdness` - æ·«ä¹±ï¼ˆãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰
- `Hypnosis` - å‚¬çœ ï¼ˆãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰
- `Brainwash` - æ´—è„³ï¼ˆãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰
- `Sweet` - ç”˜ã„ï¼ˆãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰
- `DreamControl` - å¤¢æ“ä½œï¼ˆãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰
- `Melting` - è•©ã‘ï¼ˆãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰
- `Euphoria` - å¤šå¹¸æ„Ÿï¼ˆãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰
- `Fascination` - é­…æƒ‘ï¼ˆãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰
- `Bliss` - è‡³ç¦ï¼ˆãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰
- `Enchantment` - é­”é­…ï¼ˆãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰

#### CSS ã‚¯ãƒ©ã‚¹ã®è¿½åŠ 
`src/styles/main.css` ã« `.status-{type}` ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 

## AIã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ä¾‹

### åŸºæœ¬ãƒ‘ã‚¿ãƒ¼ãƒ³

```typescript
aiStrategy: (boss, player, turn) => {
    // customVariablesã§ã®ç‰¹æ®ŠæŠ€ç®¡ç†ã®ä¾‹
    const specialMove = actions.find(action => action.name === 'ç‰¹æ®ŠæŠ€å');
    if (specialMove && boss.getHpPercentage() <= 30 && !boss.getCustomVariable<boolean>('hasUsedSpecialMove')) {
        boss.setCustomVariable('hasUsedSpecialMove', true);
        boss.setCustomVariable('specialMoveCooldown', 15);  // 15ã‚¿ãƒ¼ãƒ³ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³
        return specialMove;
    }

    // customVariablesã§ã®ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ç®¡ç†
    const cooldown = boss.getCustomVariable<number>('specialMoveCooldown');
    if (cooldown && cooldown > 0) {
        boss.setCustomVariable('specialMoveCooldown', cooldown - 1);
        if (cooldown - 1 <= 0) {
            boss.setCustomVariable('hasUsedSpecialMove', false);
        }
    }

    // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ•—åŒ—å¾Œã®è¡Œå‹•
    if (player.isDefeated()) {
        const postDefeatedActions: BossAction[] = [
            {
                type: ActionType.PostDefeatedAttack,
                name: 'æ•—åŒ—å¾Œã®è¡Œå‹•',
                description: 'æ•—åŒ—ã—ãŸãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å¯¾ã™ã‚‹è¡Œå‹•',
                messages: ['æ•—åŒ—å¾Œã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸...'],
                weight: 1
            }
        ];
        return postDefeatedActions[Math.floor(Math.random() * postDefeatedActions.length)];
    }
    
    // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒé£Ÿã¹ã‚‰ã‚ŒãŸçŠ¶æ…‹
    if (player.isEaten()) {
        const eatenActions = actions.filter(action => 
            action.playerStateCondition === 'eaten'
        );
        // é‡ã¿ä»˜ããƒ©ãƒ³ãƒ€ãƒ é¸æŠ
        const totalWeight = eatenActions.reduce((sum, action) => sum + action.weight, 0);
        let random = Math.random() * totalWeight;
        
        for (const action of eatenActions) {
            random -= action.weight;
            if (random <= 0) {
                return action;
            }
        }
        return eatenActions[0];
    }
    
    // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒæˆ¦é—˜ä¸èƒ½
    if (player.isKnockedOut()) {
        if (player.isRestrained()) {
            // æ‹˜æŸ+æˆ¦é—˜ä¸èƒ½æ™‚ï¼šé«˜ç¢ºç‡ã§é£Ÿã¹ã‚‹
            if (Math.random() < 0.85) {
                return {
                    type: ActionType.EatAttack,
                    name: 'ä¸¸å‘‘ã¿',
                    description: 'æ‹˜æŸã—ãŸç²ç‰©ã‚’ä¸¸å‘‘ã¿ã™ã‚‹',
                    messages: ['ä¸¸å‘‘ã¿ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸...'],
                    weight: 1
                };
            }
        } else {
            // æˆ¦é—˜ä¸èƒ½æ™‚ï¼šæ‹˜æŸoré£Ÿã¹ã‚‹
            const random = Math.random();
            if (random < 0.7) {
                return {
                    type: ActionType.RestraintAttack,
                    name: 'æ‹˜æŸ',
                    description: 'ç²ç‰©ã‚’æ‹˜æŸã™ã‚‹',
                    messages: ['æ‹˜æŸã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸...'],
                    weight: 1
                };
            } else if (random < 0.9) {
                return {
                    type: ActionType.EatAttack,
                    name: 'ä¸¸å‘‘ã¿',
                    description: 'ç²ç‰©ã‚’ä¸¸å‘‘ã¿ã™ã‚‹',
                    messages: ['ä¸¸å‘‘ã¿ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸...'],
                    weight: 1
                };
            }
        }
    }
    
    // é€šå¸¸ã®é‡ã¿ä»˜ããƒ©ãƒ³ãƒ€ãƒ é¸æŠ
    const currentPlayerState = boss.getPlayerState(player);
    const availableActions = actions.filter(action => {
        // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼çŠ¶æ…‹æ¡ä»¶ãƒã‚§ãƒƒã‚¯
        if (action.playerStateCondition) {
            if (action.playerStateCondition !== currentPlayerState) {
                return false;
            }
        }
        
        // ä½¿ç”¨æ¡ä»¶ãƒã‚§ãƒƒã‚¯
        if (action.canUse) {
            return action.canUse(boss, player, turn);
        }
        return true;
    });
    
    const totalWeight = availableActions.reduce((sum, action) => sum + action.weight, 0);
    let random = Math.random() * totalWeight;
    
    for (const action of availableActions) {
        random -= action.weight;
        if (random <= 0) {
            return action;
        }
    }
    
    return availableActions[0];
}
```

## ãƒãƒ©ãƒ³ã‚¹èª¿æ•´æŒ‡é‡

### HPãƒ»æ”»æ’ƒåŠ›ã®æ¨å¥¨å€¤

ç¾åœ¨ã®ãƒœã‚¹è¨­å®šã‚’åŸºã«ã—ãŸæ¨å¥¨å€¤ï¼š

- **åˆç´šãƒœã‚¹**: HP 150-200, æ”»æ’ƒåŠ› 12-15
- **ä¸­ç´šãƒœã‚¹**: HP 250-350, æ”»æ’ƒåŠ› 15-20
- **ä¸Šç´šãƒœã‚¹**: HP 350-450, æ”»æ’ƒåŠ› 18-22

### æ—¢å­˜ãƒœã‚¹ã¨ã®æ¯”è¼ƒ

**ç¾åœ¨å®Ÿè£…æ¸ˆã¿ã®ãƒœã‚¹14ä½“**

#### åŸºæœ¬ã‚¨ãƒªã‚¢ (explorerLevelRequired: 0)
- æ²¼ã®ãƒ‰ãƒ©ã‚´ãƒ³: HP 400, æ”»æ’ƒåŠ› 18 (é«˜ç«åŠ›ã‚¿ã‚¤ãƒ—)
- é—‡ã®ãŠã°ã‘: HP 150, æ”»æ’ƒåŠ› 12 (çŠ¶æ…‹ç•°å¸¸ã‚¿ã‚¤ãƒ—)
- æ©Ÿæ¢°ã®ã‚¯ãƒ¢: HP 180, æ”»æ’ƒåŠ› 15 (æ‹˜æŸã‚¿ã‚¤ãƒ—)

#### ç ‚æ¼ ã‚¨ãƒªã‚¢ (explorerLevelRequired: 1)
- ã‚¹ã‚³ãƒ¼ãƒ”ã‚ªãƒ³ã‚­ãƒ£ãƒªã‚¢: HP 260, æ”»æ’ƒåŠ› 14 (æ¯’+éº»ç—ºã‚¿ã‚¤ãƒ—)

#### æµ·ã‚¨ãƒªã‚¢ (explorerLevelRequired: 2)
- æµ·ã®ã‚¯ãƒ©ãƒ¼ã‚±ãƒ³: HP 350, æ”»æ’ƒåŠ› 15 (æ‹˜æŸ+å¸åã‚¿ã‚¤ãƒ—)
- ã‚¢ã‚¯ã‚¢ã‚µãƒ¼ãƒšãƒ³ãƒˆ: HP 350, æ”»æ’ƒåŠ› 20 (æ°´å±æ€§+ä½“å†…æ”»æ’ƒã‚¿ã‚¤ãƒ—)

#### ã‚²ã‚¹ãƒˆã‚­ãƒ£ãƒ©ã‚¨ãƒªã‚¢ (explorerLevelRequired: 3)
- ãƒ‰ãƒªãƒ¼ãƒ ãƒ‡ãƒ¼ãƒ¢ãƒ³: HP 240, æ”»æ’ƒåŠ› 13 (å¤¢+ç‰¹æ®ŠçŠ¶æ…‹ç•°å¸¸ã‚¿ã‚¤ãƒ—)

#### ã‚¸ãƒ£ãƒ³ã‚°ãƒ«ã‚¨ãƒªã‚¢ (explorerLevelRequired: 4)
- ã¿ã‹ã‚“ãƒ‰ãƒ©ã‚´ãƒ³: HP 320, æ”»æ’ƒåŠ› 17 (æœç‰©+ç¡çœ ã‚¿ã‚¤ãƒ—)

#### éºè·¡ã‚¨ãƒªã‚¢ (explorerLevelRequired: 6)
- ã‚¯ãƒªãƒ¼ãƒ³ãƒã‚¹ã‚¿ãƒ¼: HP 280, æ”»æ’ƒåŠ› 16 (æ¸…æƒ+çŠ¶æ…‹ç•°å¸¸ã‚¿ã‚¤ãƒ—)
- è™è ã®ãƒ´ã‚¡ãƒ³ãƒ‘ã‚¤ã‚¢: HP 310, æ”»æ’ƒåŠ› 14 (æ‹˜æŸ+é­…äº†+ç”Ÿæ°—å¸åã‚¿ã‚¤ãƒ—)
- åœ°ä¸‹ã®ãƒ¯ãƒ¼ãƒ : HP 380, æ”»æ’ƒåŠ› 12 (åœ°ä¸‹å‹æ‹˜æŸã‚¿ã‚¤ãƒ—)

**ãƒãƒ©ãƒ³ã‚¹è¨­è¨ˆæŒ‡é‡**
- HP 150-200: çŠ¶æ…‹ç•°å¸¸ç‰¹åŒ–å‹ï¼ˆçŸ­æœŸæ±ºæˆ¦å‹ï¼‰
- HP 250-350: ãƒãƒ©ãƒ³ã‚¹å‹ï¼ˆä¸­æœŸæˆ¦é—˜å‹ï¼‰
- HP 350-450: é«˜è€ä¹…å‹ï¼ˆé•·æœŸæˆ¦é—˜å‹ï¼‰
- æ”»æ’ƒåŠ›ã¯ç‰¹æ®Šèƒ½åŠ›ã®å¼·ã•ã«åæ¯”ä¾‹ã•ã›ã‚‹

## ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚¢ãƒ“ãƒªãƒ†ã‚£ã¨ãƒœã‚¹è§£ç¦ã‚·ã‚¹ãƒ†ãƒ 

### æ¦‚è¦

ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚¢ãƒ“ãƒªãƒ†ã‚£ã¯ã€ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æ¢æ¤œç¯„å›²ã‚’æ‹¡å¤§ã—ã€æ–°ã—ã„ãƒœã‚¹ã¨ã®æˆ¦é—˜ã‚’ã‚¢ãƒ³ãƒ­ãƒƒã‚¯ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚å„ãƒœã‚¹ã« `explorerLevelRequired` ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€æ®µéšçš„ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„è§£ç¦ãŒå¯èƒ½ã§ã™ã€‚

### è§£ç¦ãƒ¬ãƒ™ãƒ«è¨­å®šã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

```typescript
// åŸºæœ¬ãƒœã‚¹ï¼ˆå¸¸ã«åˆ©ç”¨å¯èƒ½ï¼‰
explorerLevelRequired: 0

// åˆç´šæ‹¡å¼µãƒœã‚¹
explorerLevelRequired: 1

// ä¸­ç´šæ‹¡å¼µãƒœã‚¹
explorerLevelRequired: 2-4

// ä¸Šç´šæ‹¡å¼µãƒœã‚¹
explorerLevelRequired: 5-7

// æœ€é«˜ç´šæ‹¡å¼µãƒœã‚¹
explorerLevelRequired: 8-10
```

### ç¾åœ¨ã®è§£ç¦ãƒ¬ãƒ™ãƒ«åˆ†å¸ƒï¼ˆåœ°åŸŸãƒ†ãƒ¼ãƒåˆ¥ï¼‰

ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚¢ãƒ“ãƒªãƒ†ã‚£ã®è§£ç¦ãƒ¬ãƒ™ãƒ«ã¯ã€ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æ¢æ¤œç¯„å›²æ‹¡å¤§ã¨ã„ã†è¨­å®šã«åˆã‚ã›ã¦åœ°åŸŸãƒ»ç’°å¢ƒãƒ†ãƒ¼ãƒã”ã¨ã«è¨­å®šã•ã‚Œã¦ã„ã¾ã™ï¼š

- **ãƒ¬ãƒ™ãƒ«0 - åˆæœŸã‚¨ãƒªã‚¢ãƒ»åŸºæœ¬ãƒœã‚¹**
  - æ²¼ã®ãƒ‰ãƒ©ã‚´ãƒ³ã€é—‡ã®ãŠã°ã‘ã€æ©Ÿæ¢°ã®ã‚¯ãƒ¢
- **ãƒ¬ãƒ™ãƒ«1 - ç ‚æ¼ **
  - é‹ã³å±‹ã®ã‚µã‚½ãƒª
- **ãƒ¬ãƒ™ãƒ«2 - æµ·**
  - æµ·ã®ã‚¯ãƒ©ãƒ¼ã‚±ãƒ³ã€ã‚¢ã‚¯ã‚¢ã‚µãƒ¼ãƒšãƒ³ãƒˆ
- **ãƒ¬ãƒ™ãƒ«3 - ã‚²ã‚¹ãƒˆã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é–¢ä¿‚**
  - å¤¢é­”ã¡ã‚ƒã‚“
- **ãƒ¬ãƒ™ãƒ«4 - ã‚¸ãƒ£ãƒ³ã‚°ãƒ«**
  - èœœæŸ‘ãƒ‰ãƒ©ã‚´ãƒ³
- **ãƒ¬ãƒ™ãƒ«5 - æ´çªŸãƒ»åœ°ä¸‹ä¸–ç•Œ**
  - ï¼ˆå°†æ¥ã®æ‹¡å¼µç”¨ï¼‰
- **ãƒ¬ãƒ™ãƒ«6 - éºè·¡ãƒ»å»ƒå¢Ÿãƒ»å¤åŸ**
  - ã‚¯ãƒªãƒ¼ãƒ³ãƒã‚¹ã‚¿ãƒ¼ã€ãƒ´ã‚¡ãƒ³ãƒ‘ã‚¤ã‚¢
- **ãƒ¬ãƒ™ãƒ«7 - æ°·æ²³ãƒ»é›ªå±±**
  - ï¼ˆå°†æ¥ã®æ‹¡å¼µç”¨ï¼‰
- **ãƒ¬ãƒ™ãƒ«8 - ç«å±±ãƒ»æº¶å²©**
  - ï¼ˆå°†æ¥ã®æ‹¡å¼µç”¨ï¼‰
- **ãƒ¬ãƒ™ãƒ«9 - å¤©ç©ºãƒ»å®‡å®™**
  - ï¼ˆå°†æ¥ã®æ‹¡å¼µç”¨ï¼‰
- **ãƒ¬ãƒ™ãƒ«10 - é­”ç•Œãƒ»å†¥ç•Œ**
  - ï¼ˆå°†æ¥ã®æ‹¡å¼µç”¨: ç†ä¸å°½åº¦MAX!ï¼‰

### è¨˜å¿µå“ã‚·ã‚¹ãƒ†ãƒ 

å„ãƒœã‚¹ã«ã¯å‹åˆ©æ™‚ã¨æ•—åŒ—æ™‚ã®è¨˜å¿µå“ã‚’è¨­å®šã§ãã¾ã™ã€‚è¨˜å¿µå“ã¯ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼çµŒé¨“å€¤ã®ç²å¾—æºã¨ãªã‚Šã€ãƒãƒˆãƒ«ã®æˆæœã¨ã—ã¦è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚

#### è¨˜å¿µå“ã®è¨­å®šæŒ‡é‡

- **å‹åˆ©æ™‚è¨˜å¿µå“ï¼ˆvictoryTrophyï¼‰**: ãƒœã‚¹ã®å¤–å´ã‹ã‚‰æ¡ã‚Œã‚‹ã‚¢ã‚¤ãƒ†ãƒ 
  - ä¾‹ï¼šé±—ã€æ®»ã€ç¾½æ ¹ã€å¤–çš®ã€è£…ç”²ã€è§’ã€ç‰™ãªã©
  - ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒæˆ¦é—˜ã§å‹åˆ©ã—ã€ãƒœã‚¹ã®å¤–è¦‹çš„ç‰¹å¾´ã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹æˆ¦åˆ©å“

- **æ•—åŒ—æ™‚è¨˜å¿µå“ï¼ˆdefeatTrophyï¼‰**: ãƒœã‚¹ã®ä½“å†…ã‹ã‚‰æ¡ã‚Œã‚‹ã‚¢ã‚¤ãƒ†ãƒ 
  - ä¾‹ï¼šä½“æ¶²ã€ã‚¨ãƒƒã‚»ãƒ³ã‚¹ã€å†…è‡“ã®ä¸€éƒ¨ã€è¡€æ¶²ã€åˆ†æ³Œç‰©ãªã©
  - ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒæ•—åŒ—ã—ãŸãŒã€ãƒœã‚¹ã®å†…éƒ¨ã«ä¸€æ™‚çš„ã«å…¥ã£ãŸã“ã¨ã§å¾—ã‚‰ã‚Œã‚‹è²´é‡ãªã‚‚ã®

#### è¨˜å¿µå“ãƒ‡ãƒ¼ã‚¿ã®å®Ÿè£…

```typescript
victoryTrophy: {
    name: 'è¨˜å¿µå“å',
    description: 'è¨˜å¿µå“ã®è©³ç´°èª¬æ˜ã€‚ã©ã®ã‚ˆã†ãªã‚¢ã‚¤ãƒ†ãƒ ã§ã€ã©ã‚“ãªç‰¹å¾´ãŒã‚ã‚‹ã‹ã‚’è¨˜è¿°ã€‚'
},
defeatTrophy: {
    name: 'è¨˜å¿µå“å', 
    description: 'è¨˜å¿µå“ã®è©³ç´°èª¬æ˜ã€‚ã©ã®ã‚ˆã†ãªã‚¢ã‚¤ãƒ†ãƒ ã§ã€ã©ã‚“ãªä¾¡å€¤ãŒã‚ã‚‹ã‹ã‚’è¨˜è¿°ã€‚'
}
```

### ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼çµŒé¨“å€¤ç²å¾—ã‚·ã‚¹ãƒ†ãƒ 

1. **åˆå›å‹åˆ©è¨˜å¿µå“**: `(è§£ç¦ãƒ¬ãƒ™ãƒ« + 1)Â² Ã— 200` çµŒé¨“å€¤
2. **åˆå›æ•—åŒ—è¨˜å¿µå“**: `(è§£ç¦ãƒ¬ãƒ™ãƒ« + 1)Â² Ã— 50` çµŒé¨“å€¤
3. **ã‚¹ã‚­ãƒ«ä½“é¨“**: `å—ã‘ãŸã‚¹ã‚­ãƒ«ç¨®é¡æ•° Ã— 20 Ã— (è§£ç¦ãƒ¬ãƒ™ãƒ« + 1)` çµŒé¨“å€¤

### æ–°ãƒœã‚¹è¿½åŠ æ™‚ã®è€ƒæ…®äº‹é …

- ãƒ†ãƒ¼ãƒã«å¿œã˜ãŸé©åˆ‡ãªè§£ç¦ãƒ¬ãƒ™ãƒ«ã‚’è¨­å®š
- æ—¢å­˜ãƒœã‚¹ã¨ã®é›£æ˜“åº¦ãƒãƒ©ãƒ³ã‚¹ã‚’è€ƒæ…®
- è¨˜å¿µå“åã¯ã€Œ{ãƒœã‚¹å}ã®ãŸã¦ãŒã¿ã€ï¼ˆå‹åˆ©ï¼‰ã€ã€Œ{ãƒœã‚¹å}ã®ç²˜æ¶²ã€ï¼ˆæ•—åŒ—ï¼‰ã§è‡ªå‹•ç”Ÿæˆã‚‚å¯èƒ½ã§ã™ãŒã€ãƒœã‚¹å›ºæœ‰ã®ç‰¹å¾´ã‚’åæ˜ ã—ãŸç‹¬è‡ªã®è¨˜å¿µå“è¨­å®šã‚’æ¨å¥¨

## ãƒ†ã‚¹ãƒˆé …ç›®

### ç‰¹ã«é‡è¦ãªãƒ†ã‚¹ãƒˆ
- [ ] **TypeScriptå‹ãƒã‚§ãƒƒã‚¯**: `npm run typecheck` ã§ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨
- [ ] **å˜ä½“ãƒ†ã‚¹ãƒˆ**: `npm run test` ã§ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã™ã‚‹ã“ã¨
- [ ] **ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ**: `npm run build` ã§ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã™ã‚‹ã“ã¨
- [ ] **ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ãƒ¬ãƒ™ãƒ«åˆ¶å¾¡**: é©åˆ‡ãªãƒ¬ãƒ™ãƒ«ã§ãƒœã‚¹ãŒè§£ç¦ã•ã‚Œã‚‹ã“ã¨

### åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
- [ ] ãƒœã‚¹é¸æŠç”»é¢ã§ã®è¡¨ç¤ºç¢ºèª
- [ ] æˆ¦é—˜é–‹å§‹ãƒ»çµ‚äº†ã®å‹•ä½œç¢ºèª
- [ ] å„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®å‹•ä½œç¢ºèª
- [ ] AIã®è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ç¢ºèª
- [ ] çŠ¶æ…‹ç•°å¸¸ã®å‹•ä½œç¢ºèª
- [ ] ãƒãƒ©ãƒ³ã‚¹ã®èª¿æ•´ç¢ºèª
- [ ] è¨˜å¿µå“ã‚·ã‚¹ãƒ†ãƒ ã®å‹•ä½œç¢ºèª

## å‚è€ƒãƒ•ã‚¡ã‚¤ãƒ«

å®Ÿè£…ã®å‚è€ƒã¨ã—ã¦ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

### ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ ãƒ•ã‚¡ã‚¤ãƒ«
- `src/templates/` - EJSãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ï¼ˆHTMLè‡ªå‹•ç”Ÿæˆï¼‰
- `vite.config.ts` - Viteãƒ“ãƒ«ãƒ‰è¨­å®šã€EJSãƒ—ãƒ©ã‚°ã‚¤ãƒ³çµ±åˆ
- `vitest.config.ts` - Vitestãƒ†ã‚¹ãƒˆè¨­å®š

### å¤ã„å®Ÿè£…ï¼ˆå‚è€ƒç”¨ï¼‰
- `src/game/data/bosses/swamp-dragon.ts` - è¤‡é›‘ãªAIæˆ¦ç•¥ã®ä¾‹
- `src/game/data/bosses/dark-ghost.ts` - çŠ¶æ…‹ç•°å¸¸ç‰¹åŒ–ã®ä¾‹
- `src/game/data/bosses/mech-spider.ts` - æ‹˜æŸç‰¹åŒ–ã®ä¾‹

### æ–°ã—ã„å®Ÿè£…ï¼ˆæ¨å¥¨ï¼‰
- `src/game/data/bosses/sea-kraken.ts` - ç¾ä»£çš„ãªAIæˆ¦ç•¥ã€PostDefeatedAttackã€finishingMoveã€getDialogue ã®ä¾‹
- `src/game/data/bosses/aqua-serpent.ts` - customVariablesã§ã®ç‰¹æ®ŠæŠ€ç®¡ç†ã€onUse ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®ä¾‹
- `src/game/data/bosses/clean-master.ts` - æ–°ã—ã„çŠ¶æ…‹ç•°å¸¸ã‚·ã‚¹ãƒ†ãƒ ã®ä¾‹
- `src/game/data/bosses/dream-demon.ts` - å¤šæ§˜ãªçŠ¶æ…‹ç•°å¸¸ã¨è¤‡é›‘ãªè¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¾‹
- `src/game/data/bosses/bat-vampire.ts` - FinishingMoveã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€çµ¦é¤Œã‚·ã‚¹ãƒ†ãƒ ã€è©³ç´°ãªAIæˆ¦ç•¥ã®ä¾‹
- `src/game/data/bosses/underground-worm.ts` - æœ€æ–°ã®EJSãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¯¾å¿œã€è¨˜å¿µå“ã‚·ã‚¹ãƒ†ãƒ ã®ä¾‹
- `src/game/data/bosses/mikan-dragon.ts` - æ–°ã—ã„çŠ¶æ…‹ç•°å¸¸ã¨ã‚·ãƒ³ãƒ—ãƒ«ãªAIæˆ¦ç•¥ã®ä¾‹

### ã‚·ã‚¹ãƒ†ãƒ ãƒ•ã‚¡ã‚¤ãƒ«
- `src/game/entities/Boss.ts` - ãƒœã‚¹ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…
- `src/game/systems/StatusEffectTypes.ts` - çŠ¶æ…‹ç•°å¸¸ã‚·ã‚¹ãƒ†ãƒ 
- `src/game/data/index.ts` - ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³

## ã‚ˆãã‚ã‚‹å•é¡Œã¨å¯¾å‡¦æ³•

### ãƒœã‚¹ãŒè¡¨ç¤ºã•ã‚Œãªã„

- **ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡ç¢ºèª**: ãƒœã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ãŒ `{boss-id}.ts` å½¢å¼ã§ä½œæˆã•ã‚Œã¦ã„ã‚‹ã‹
- **exportåç¢ºèª**: exportåãŒ `{camelCaseBossId}Data` å½¢å¼ã«ãªã£ã¦ã„ã‚‹ã‹ï¼ˆä¾‹: `swamp-dragon.ts` â†’ `swampDragonData`ï¼‰
- **BossDataã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹é©åˆ**: `id` ã¨ `displayName` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹
- **EJSãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ã®ãƒ“ãƒ«ãƒ‰çµæœç¢ºèª**ï¼ˆHTMLã¯è‡ªå‹•ç”Ÿæˆï¼‰
- **ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ãƒ¬ãƒ™ãƒ«ä¸è¶³ã«ã‚ˆã‚‹éè¡¨ç¤ºã§ã¯ãªã„ã‹ç¢ºèª**

### è¡Œå‹•ãŒé¸æŠã•ã‚Œãªã„

- `canUse` é–¢æ•°ã®æ¡ä»¶ç¢ºèª
- `weight` ãŒ0ä»¥ä¸Šã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- `playerStateCondition` ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

### çŠ¶æ…‹ç•°å¸¸ãŒåŠ¹ã‹ãªã„

- `StatusEffectType` ã®å®šç¾©ç¢ºèª
- CSS ã‚¯ãƒ©ã‚¹ã®è¿½åŠ ç¢ºèª
- `statusChance` ã®è¨­å®šç¢ºèªï¼ˆ0.0-1.0ã®ç¯„å›²ã§è¨­å®šï¼‰

### ã‚³ãƒ¼ãƒ‰å“è³ªé–¢é€£ã‚¨ãƒ©ãƒ¼
- **EJSãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé–¢é€£**: Viteãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ§‹æ–‡ã‚’ç¢ºèª
- ~~**registeredBossIdsã®ä¸ä¸€è‡´**~~: âŒ **ä¸è¦ï¼** glob importã«ã‚ˆã‚‹è‡ªå‹•æ¤œå‡º
- **glob import ã‚¨ãƒ©ãƒ¼**: ãƒ•ã‚¡ã‚¤ãƒ«åã¨exportåã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ç¢ºèª
- **TypeScriptã‚¨ãƒ©ãƒ¼**: ãƒœã‚¹ãƒ‡ãƒ¼ã‚¿ã®BossDataã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹é©åˆæ€§ã‚’ç¢ºèª
- **ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼**: Vitestãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®å®Ÿè¡Œçµæœã‚’ç¢ºèª