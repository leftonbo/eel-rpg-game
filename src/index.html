<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ElnalFTB</title>
    
    <!-- 検索エンジン対策: インデックス禁止 -->
    <meta name="robots" content="noindex, nofollow">
    <meta name="googlebot" content="noindex, nofollow">
    <meta name="description" content="うなぎのエルナルが主人公のターン制RPGゲーム">
    
    <!-- Open Graph / Discord Embed -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="🐍 ElnalFTB">
    <meta property="og:description" content="うなぎのエルナルが主人公のターン制RPGゲーム">
    <meta property="og:url" content="https://leftonbo.github.io/eel-rpg-game/">
    <meta property="og:site_name" content="ElnalFTB">
    <meta property="og:locale" content="ja_JP">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="🐍 ElnalFTB">
    <meta name="twitter:description" content="うなぎのエルナルが主人公のターン制RPGゲーム">
    
    <!-- Bootstrap CSS (Dark Theme) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Game Styles (loaded by Webpack) -->
</head>
<body class="bg-dark text-light" data-bs-theme="dark">
    <!-- Game Container -->
    <div id="game-container" class="container-fluid vh-100 d-flex flex-column">
        
        <!-- Title Screen -->
        <div id="title-screen" class="scene d-flex align-items-center justify-content-center">
            <div class="text-center">
                <h1 class="display-1 mb-4 game-title">🐍 ElnalFTB</h1>
                
                <div class="alert alert-warning mx-auto max-width-600">
                    <h5>⚠️ 注意事項</h5>
                    <ul class="mb-0 text-start">
                        <li>このゲームには戦闘シーンが含まれます</li>
                        <li>捕食や丸呑み表現が含まれます</li>
                    </ul>
                </div>
                
                <button id="start-button" class="btn btn-primary btn-lg mt-4">
                    🎮 ゲームスタート
                </button>
            </div>
        </div>
        
        <!-- Boss Selection Screen -->
        <div id="boss-select-screen" class="scene d-none">
            <div class="row h-100">
                <!-- Player Status Area -->
                <div class="col-12 mb-4">
                    <div class="card bg-primary">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">🐍 エルナル</h5>
                            <button id="player-details-btn" class="btn btn-sm btn-light">詳細表示</button>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-3">
                                    <strong>ヘルス:</strong> <span id="player-summary-max-hp">100</span>
                                </div>
                                <div class="col-md-3">
                                    <strong>マナ:</strong> <span id="player-summary-max-mp">40</span>
                                </div>
                                <div class="col-md-3">
                                    <strong>攻撃力:</strong> <span id="player-summary-attack">5</span>
                                </div>
                            </div>
                            <div class="row mt-2">
                                <div class="col-md-3">
                                    <strong>武器:</strong> <span id="player-summary-weapon">素手</span>
                                </div>
                                <div class="col-md-3">
                                    <strong>防具:</strong> <span id="player-summary-armor">はだか</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                
                <!-- Boss Selection Area -->
                <div class="col-12">
                    <h2 class="text-center mb-4">討伐対象を選択....</h2>
                    
                    <div class="row justify-content-center">
                        <!-- Boss Cards -->
                        <div class="col-md-4 mb-4">
                            <div class="card bg-secondary h-100 boss-card" data-boss="swamp-dragon">
                                <div class="card-body text-center">
                                    <h3 class="card-title">🐲 沼のドラゴン</h3>
                                    <p class="card-text">高い攻撃力を持つドラゴン。炎のブレスに注意！</p>
                                    <button class="btn btn-danger w-100">選択</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 mb-4">
                            <div class="card bg-secondary h-100 boss-card" data-boss="dark-ghost">
                                <div class="card-body text-center">
                                    <h3 class="card-title">👻 闇のおばけ</h3>
                                    <p class="card-text">状態異常攻撃を多用する。魅了に注意！</p>
                                    <button class="btn btn-warning w-100">選択</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 mb-4">
                            <div class="card bg-secondary h-100 boss-card" data-boss="mech-spider">
                                <div class="card-body text-center">
                                    <h3 class="card-title">🕷️ 機械のクモ</h3>
                                    <p class="card-text">拘束攻撃を頻発する。捕まらないよう注意！</p>
                                    <button class="btn btn-info w-100">選択</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 mb-4">
                            <div class="card bg-secondary h-100 boss-card" data-boss="dream-demon">
                                <div class="card-body text-center">
                                    <h3 class="card-title">😈 夢魔ちゃん</h3>
                                    <p class="card-text">多種多様なデバフで相手を弱らせる淫魔。デバフ重ね掛けに注意！</p>
                                    <button class="btn btn-purple w-100">選択</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 mb-4">
                            <div class="card bg-secondary h-100 boss-card" data-boss="scorpion-carrier">
                                <div class="card-body text-center">
                                    <h3 class="card-title">🦂 運び屋のサソリ</h3>
                                    <p class="card-text">砂漠を徘徊する半機械のサソリ。麻酔や毒の注射に注意！</p>
                                    <button class="btn btn-warning w-100">選択</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 mb-4">
                            <div class="card bg-secondary h-100 boss-card" data-boss="mikan-dragon">
                                <div class="card-body text-center">
                                    <h3 class="card-title">🍊 蜜柑ドラゴン</h3>
                                    <p class="card-text">蜜柑の香りを放つ甘いドラゴン。魅了と粘液攻撃に注意！</p>
                                    <button class="btn btn-success w-100">選択</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 mb-4">
                            <div class="card bg-secondary h-100 boss-card" data-boss="sea-kraken">
                                <div class="card-body text-center">
                                    <h3 class="card-title">🦑 海のクラーケン</h3>
                                    <p class="card-text">深海の紫色の巨大イカ。触手の吸引力とイカスミの催眠効果に注意！</p>
                                    <button class="btn btn-primary w-100">選択</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 mb-4">
                            <div class="card bg-secondary h-100 boss-card" data-boss="aqua-serpent">
                                <div class="card-body text-center">
                                    <h3 class="card-title">🐍 アクアサーペント</h3>
                                    <p class="card-text">大海原を泳ぐ神秘的な海蛇型の龍。透明な体内で生命力を吸収する習性を持つ！</p>
                                    <button class="btn btn-info w-100">選択</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 mb-4">
                            <div class="card bg-secondary h-100 boss-card" data-boss="underground-worm">
                                <div class="card-body text-center">
                                    <h3 class="card-title">🪨 地底のワーム</h3>
                                    <small class="text-muted">Level 5 - 洞窟・地下世界</small>
                                    <p class="card-text">地底深くに住む巨大な虫。硬い岩も飲み込む強靭な顎を持つ。</p>
                                    <button class="btn btn-info w-100">選択</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 mb-4">
                            <div class="card bg-secondary h-100 boss-card" data-boss="clean-master">
                                <div class="card-body text-center">
                                    <h3 class="card-title">🧹 クリーンマスター</h3>
                                    <small class="text-muted">Level 6 - 遺跡・廃墟</small>
                                    <p class="card-text">かわいい汎用清掃マスコットロボット。完璧主義で「きれいになるまで」絶対に止まらない！</p>
                                    <button class="btn btn-info w-100">選択</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 mb-4">
                            <div class="card bg-secondary h-100 boss-card" data-boss="bat-vampire">
                                <div class="card-body text-center">
                                    <h3 class="card-title">🦇 コウモリヴァンパイア</h3>
                                    <p class="card-text">古城に住む紳士的なコウモリの獣人。表向きは優雅だが、内心は獲物を陥れることに喜びを感じている。</p>
                                    <button class="btn btn-dark w-100">選択</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Footer for Boss Selection Screen -->
                <footer class="mt-auto py-3 bg-dark border-top">
                    <div class="container-fluid">
                        <div class="row align-items-center">
                            <div class="col-md-6">
                                <p class="text-muted mb-0">©2025 LefTonbo</p>
                            </div>
                            <div class="col-md-6 text-md-end">
                                <a href="https://github.com/leftonbo/eel-rpg-game" target="_blank" class="text-decoration-none text-muted">
                                    <svg width="20" height="20" fill="currentColor" class="me-2" viewBox="0 0 16 16">
                                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
                                    </svg>
                                    GitHub
                                </a>
                            </div>
                        </div>
                    </div>
                </footer>
            </div>
        </div>
        
        <!-- Battle Screen -->
        <div id="battle-screen" class="scene d-none">
            <div class="row h-100">
                <!-- Battle Info Panel -->
                <div class="col-12 mb-3">
                    <div class="row">
                        <!-- Player Status -->
                        <div class="col-md-6">
                            <div class="card bg-primary">
                                <div class="card-header">
                                    <h5 class="mb-0">🐍 エルナル</h5>
                                </div>
                                <div class="card-body">
                                    <div class="mb-2">
                                        ヘルス: <span id="player-hp">1000</span> / <span id="player-max-hp">1000</span>
                                        <div id="player-hp-progress" class="progress">
                                            <div id="player-hp-bar" class="progress-bar bg-success"></div>
                                        </div>
                                    </div>
                                    <div class="mb-2">
                                        マナ: <span id="player-mp">40</span> / <span id="player-max-mp">40</span>
                                        <div id="player-mp-progress" class="progress">
                                            <div id="player-mp-bar" class="progress-bar bg-info"></div>
                                        </div>
                                    </div>
                                    <div id="player-status-effects" class="mt-2">
                                        <!-- Status effects will be displayed here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Boss Status -->
                        <div class="col-md-6">
                            <div class="card bg-danger">
                                <div class="card-header">
                                    <h5 id="boss-name" class="mb-0">ボス</h5>
                                </div>
                                <div class="card-body">
                                    <div class="mb-2">
                                        ヘルス: <span id="boss-hp">0</span> / <span id="boss-max-hp">0</span>
                                        <div id="boss-hp-progress" class="progress">
                                            <div id="boss-hp-bar" class="progress-bar bg-danger"></div>
                                        </div>
                                    </div>
                                    <div id="boss-status-effects" class="mt-2">
                                        <!-- Boss status effects will be displayed here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Battle Log -->
                <div class="col-md-8">
                    <div class="card bg-dark border-secondary h-100">
                        <div class="card-header">
                            <h6 class="mb-0">バトルログ</h6>
                        </div>
                        <div class="card-body overflow-auto max-height-400" id="battle-log">
                            <p class="text-muted">バトル開始！</p>
                        </div>
                    </div>
                </div>
                
                <!-- Action Panel -->
                <div class="col-md-4">
                    <div class="card bg-secondary h-100">
                        <div class="card-header">
                            <h6 class="mb-0">行動選択</h6>
                        </div>
                        <div class="card-body">
                            <div id="action-buttons" class="d-grid gap-2">
                                <button id="attack-btn" class="btn btn-danger">⚔️ 攻撃</button>
                                <button id="defend-btn" class="btn btn-primary">🛡️ 防御</button>
                                <button id="skill-btn" class="btn btn-warning">⚡ スキル</button>
                                <button id="item-btn" class="btn btn-success">💊 アイテム</button>
                            </div>
                            
                            <!-- Skill Panel (hidden by default) -->
                            <div id="skill-panel" class="d-none mt-3">
                                <h6>スキル</h6>
                                <div class="d-grid gap-2">
                                    <button id="power-attack-btn" class="btn btn-outline-danger" title="2.5倍の攻撃力で確実に攻撃（20MP）">
                                        💥 パワーアタック (20MP)
                                    </button>
                                    <button id="heal-skill-btn" class="btn btn-outline-success" title="HPを100回復（30MP）">
                                        ✨ ヒール (30MP)
                                    </button>
                                    <button id="struggle-skill-btn" class="btn btn-outline-warning" title="拘束状態専用：脱出確率2倍（30MP）">
                                        🔥 あばれる (30MP)
                                    </button>
                                    <button id="ultra-smash-btn" class="btn btn-outline-danger" title="全力攻撃">
                                        💀 ウルトラスマッシュ (MP全消費)
                                    </button>
                                    <button id="skill-back-btn" class="btn btn-outline-secondary">戻る</button>
                                </div>
                            </div>
                            
                            <!-- Item Panel (hidden by default) -->
                            <div id="item-panel" class="d-none mt-3">
                                <h6>アイテム</h6>
                                <div class="d-grid gap-2">
                                    <button id="heal-potion-btn" class="btn btn-outline-success" title="ヘルスを80%回復し、状態異常を解除する">
                                        💊 回復薬 (<span id="heal-potion-count">9</span>)
                                    </button>
                                    <button id="adrenaline-btn" class="btn btn-outline-warning" title="3ターンの間、無敵になる">
                                        💉 アドレナリン注射 (<span id="adrenaline-count">3</span>)
                                    </button>
                                    <button id="energy-drink-btn" class="btn btn-outline-info" title="3ターンの間、MPが常に満タンになる">
                                        ⚡ 元気ドリンク (<span id="energy-drink-count">3</span>)
                                    </button>
                                    <button id="item-back-btn" class="btn btn-outline-secondary">戻る</button>
                                </div>
                            </div>
                            
                            <!-- Special Actions Panel (for restrained state) -->
                            <div id="special-actions" class="d-none">
                                <div class="d-grid gap-2">
                                    <button id="struggle-btn" class="btn btn-warning" title="拘束から脱出を試みる（成功率は試行回数で上昇）">💪 もがく</button>
                                    <button id="struggle-skill-special-btn" class="btn btn-outline-warning" title="拘束状態専用：脱出確率2倍（30MP）">🔥 あばれる (30MP)</button>
                                    <button id="stay-still-btn" class="btn btn-info" title="体力を回復する（最大HPの5%）">😌 じっとする</button>
                                    <button id="give-up-btn" class="btn btn-secondary" title="何もしない">☠️ なすがまま</button>
                                    <!-- Omamori button will be dynamically inserted here -->
                                    <div id="omamori-special-container" class="d-grid gap-2"></div>
                                </div>
                            </div>
                            
                            <!-- Battle End Panel (for when battle is over) -->
                            <div id="battle-end-actions" class="d-none">
                                <div class="d-grid gap-2">
                                    <button id="battle-end-btn" class="btn btn-success">🎯 バトル終了</button>
                                </div>
                            </div>
                            
                            <!-- Debug Button (always visible when debug mode is on) -->
                            <div id="debug-button-container" class="mt-2">
                                <div class="d-grid gap-2">
                                    <button id="debug-btn" class="btn btn-outline-info btn-sm d-none">🔧 デバッグ</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Back to Boss Selection -->
            <div class="position-fixed bottom-0 start-0 p-3">
                <button id="back-to-select-btn" class="btn btn-outline-light">← ボス選択に戻る</button>
            </div>
        </div>
        
        <!-- Boss Description Modal -->
        <div class="modal fade" id="boss-modal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content bg-dark">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modal-boss-name">ボス名</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <p id="modal-boss-description">ボスの説明</p>
                        <p id="modal-boss-stats">
                            <!-- Boss stats will be displayed here -->
                        </p>
                        <p id="modal-boss-quest-note">雰囲気ノート</p>
                        <div id="modal-boss-guest-info" class="d-none">
                            <!-- Guest character info will be displayed here -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
                        <button type="button" class="btn btn-primary" id="confirm-boss-btn">戦闘開始！</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Battle Result Screen -->
        <div id="battle-result-screen" class="scene d-none">
            <div class="container-fluid h-100 d-flex align-items-center justify-content-center">
                <div class="col-md-8 col-lg-6">
                    <div class="card bg-dark border-info">
                        <div class="card-body text-center">
                            <h2 id="battle-result-title" class="text-info mb-4">バトル結果</h2>
                            
                            <!-- Experience Gained -->
                            <div id="experience-gained" class="mb-4">
                                <!-- Experience details will be populated here -->
                            </div>
                            
                            <!-- Level Ups -->
                            <div id="level-ups" class="mb-4">
                                <!-- Level up details will be populated here -->
                            </div>
                            
                            <!-- New Unlocks -->
                            <div id="new-unlocks" class="mb-4 max-height-300">
                                <!-- New unlock details will be populated here -->
                            </div>
                            
                            <!-- Trophies Earned -->
                            <div id="trophies-earned" class="mb-4">
                                <!-- Trophy details will be populated here -->
                            </div>
                            
                            <!-- New Boss Unlocks -->
                            <div id="new-boss-unlocks" class="mb-4">
                                <!-- New boss unlock details will be populated here -->
                            </div>
                            
                            <!-- Continue Button -->
                            <button id="battle-result-continue-btn" class="btn btn-primary btn-lg mx-auto">
                                ボス選択に戻る
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Player Details Modal -->
        <div class="modal fade" id="player-details-modal" tabindex="-1">
            <div class="modal-dialog modal-lg">
                <div class="modal-content bg-dark">
                    <div class="modal-header">
                        <h5 class="modal-title">🐍 エルナル - 詳細ステータス</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <!-- Tabs -->
                        <ul class="nav nav-tabs mb-3" id="player-details-tabs">
                            <li class="nav-item">
                                <a class="nav-link active" id="stats-tab" data-bs-toggle="tab" href="#stats-panel">ステータス</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="equipment-tab" data-bs-toggle="tab" href="#equipment-panel">装備</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="skills-tab" data-bs-toggle="tab" href="#skills-panel">スキル</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="items-tab" data-bs-toggle="tab" href="#items-panel">アイテム</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="explorer-tab" data-bs-toggle="tab" href="#explorer-panel">探検記録</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="data-management-tab" data-bs-toggle="tab" href="#data-management-panel">データ管理</a>
                            </li>
                        </ul>
                        
                        <!-- Tab Contents -->
                        <div class="tab-content">
                            <!-- Stats Panel -->
                            <div class="tab-pane fade show active" id="stats-panel">
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <h6>基本ステータス</h6>
                                        <div class="mb-2">ヘルス: <span id="detail-max-hp">100</span></div>
                                        <div class="mb-2">マナ: <span id="detail-max-mp">40</span></div>
                                        <div class="mb-2">攻撃力: <span id="detail-attack">5</span></div>
                                    </div>
                                    <div class="col-md-6">
                                        <h6>装備効果</h6>
                                        <div class="mb-2">武器ボーナス: +<span id="detail-weapon-bonus">0</span></div>
                                        <div class="mb-2">防具ボーナス: +<span id="detail-armor-bonus">0</span> HP</div>
                                    </div>
                                </div>
                                
                                <h6>アビリティ</h6>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <div class="card bg-secondary">
                                            <div class="card-body">
                                                <h6 class="card-title">⚔️ コンバット Lv.<span id="combat-level">0</span></h6>
                                                <div class="progress mb-2">
                                                    <div id="combat-progress" class="progress-bar"></div>
                                                </div>
                                                <small class="text-muted">経験値: <span id="combat-exp">0</span> / <span id="combat-next">100</span></small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <div class="card bg-secondary">
                                            <div class="card-body">
                                                <h6 class="card-title">🛡️ タフネス Lv.<span id="toughness-level">0</span></h6>
                                                <div class="progress mb-2">
                                                    <div id="toughness-progress" class="progress-bar"></div>
                                                </div>
                                                <small class="text-muted">経験値: <span id="toughness-exp">0</span> / <span id="toughness-next">100</span></small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <div class="card bg-secondary">
                                            <div class="card-body">
                                                <h6 class="card-title">🔧 クラフトワーク Lv.<span id="craftwork-level">0</span></h6>
                                                <div class="progress mb-2">
                                                    <div id="craftwork-progress" class="progress-bar"></div>
                                                </div>
                                                <small class="text-muted">経験値: <span id="craftwork-exp">0</span> / <span id="craftwork-next">100</span></small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <div class="card bg-secondary">
                                            <div class="card-body">
                                                <h6 class="card-title">💪 エンデュランス Lv.<span id="endurance-level">0</span></h6>
                                                <div class="progress mb-2">
                                                    <div id="endurance-progress" class="progress-bar"></div>
                                                </div>
                                                <small class="text-muted">経験値: <span id="endurance-exp">0</span> / <span id="endurance-next">100</span></small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <div class="card bg-secondary">
                                            <div class="card-body">
                                                <h6 class="card-title">🏃 アジリティ Lv.<span id="agility-level">0</span></h6>
                                                <div class="progress mb-2">
                                                    <div id="agility-progress" class="progress-bar"></div>
                                                </div>
                                                <small class="text-muted">経験値: <span id="agility-exp">0</span> / <span id="agility-next">100</span></small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <div class="card bg-secondary">
                                            <div class="card-body">
                                                <h6 class="card-title">🗺️ エクスプローラー Lv.<span id="explorer-level-stats">0</span></h6>
                                                <div class="progress mb-2">
                                                    <div id="explorer-progress-stats" class="progress-bar"></div>
                                                </div>
                                                <small class="text-muted">経験値: <span id="explorer-exp-stats">0</span> / <span id="explorer-next-stats">100</span></small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Debug Controls for Skills Tab -->
                                <div id="debug-controls-skills" class="mt-4 d-none">
                                    <h6>🔧 デバッグ機能 - アビリティレベル変更</h6>
                                    <div class="row">
                                        <div class="col-md-4 mb-3">
                                            <div class="card bg-secondary">
                                                <div class="card-body">
                                                    <h6 class="card-title">⚔️ コンバット</h6>
                                                    <div class="input-group mb-2">
                                                        <span class="input-group-text">Lv</span>
                                                        <input type="number" id="debug-combat-level" class="form-control" min="0" max="10" value="0">
                                                        <button class="btn btn-outline-warning btn-sm" id="debug-combat-btn">変更</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <div class="card bg-secondary">
                                                <div class="card-body">
                                                    <h6 class="card-title">🛡️ タフネス</h6>
                                                    <div class="input-group mb-2">
                                                        <span class="input-group-text">Lv</span>
                                                        <input type="number" id="debug-toughness-level" class="form-control" min="0" max="10" value="0">
                                                        <button class="btn btn-outline-warning btn-sm" id="debug-toughness-btn">変更</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <div class="card bg-secondary">
                                                <div class="card-body">
                                                    <h6 class="card-title">🔧 クラフトワーク</h6>
                                                    <div class="input-group mb-2">
                                                        <span class="input-group-text">Lv</span>
                                                        <input type="number" id="debug-craftwork-level" class="form-control" min="0" max="10" value="0">
                                                        <button class="btn btn-outline-warning btn-sm" id="debug-craftwork-btn">変更</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <div class="card bg-secondary">
                                                <div class="card-body">
                                                    <h6 class="card-title">💪 エンデュランス</h6>
                                                    <div class="input-group mb-2">
                                                        <span class="input-group-text">Lv</span>
                                                        <input type="number" id="debug-endurance-level" class="form-control" min="0" max="10" value="0">
                                                        <button class="btn btn-outline-warning btn-sm" id="debug-endurance-btn">変更</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <div class="card bg-secondary">
                                                <div class="card-body">
                                                    <h6 class="card-title">🏃 アジリティ</h6>
                                                    <div class="input-group mb-2">
                                                        <span class="input-group-text">Lv</span>
                                                        <input type="number" id="debug-agility-level" class="form-control" min="0" max="10" value="0">
                                                        <button class="btn btn-outline-warning btn-sm" id="debug-agility-btn">変更</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <div class="card bg-secondary">
                                                <div class="card-body">
                                                    <h6 class="card-title">📊 一括設定</h6>
                                                    <div class="input-group mb-2">
                                                        <span class="input-group-text">Lv</span>
                                                        <input type="number" id="debug-all-level" class="form-control" min="0" max="10" value="0">
                                                        <button class="btn btn-outline-warning btn-sm" id="debug-all-btn">全て変更</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Equipment Panel -->
                            <div class="tab-pane fade" id="equipment-panel">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h6>武器</h6>
                                        <div id="weapon-selection" class="mb-3">
                                            <!-- Weapon options will be populated here -->
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <h6>防具</h6>
                                        <div id="armor-selection" class="mb-3">
                                            <!-- Armor options will be populated here -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Skills Panel -->
                            <div class="tab-pane fade" id="skills-panel">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h6>アクティブスキル</h6>
                                        <div id="active-skills-list" class="skills-list">
                                            <!-- Active skills will be populated here -->
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <h6>パッシブスキル</h6>
                                        <div id="passive-skills-list" class="skills-list">
                                            <!-- Passive skills will be populated here -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Items Panel -->
                            <div class="tab-pane fade" id="items-panel">
                                <h6>所持アイテム</h6>
                                <div id="item-list">
                                    <!-- Item list will be populated here -->
                                </div>
                            </div>
                            
                            <!-- Explorer Panel -->
                            <div class="tab-pane fade" id="explorer-panel">
                                <h6>🗺️ エクスプローラー</h6>
                                <div class="row mb-4">
                                    <div class="col-md-6">
                                        <div class="card bg-secondary">
                                            <div class="card-body">
                                                <h6 class="card-title">🗺️ エクスプローラー Lv.<span id="explorer-level">0</span></h6>
                                                <div class="progress mb-2">
                                                    <div id="explorer-progress" class="progress-bar"></div>
                                                </div>
                                                <small class="text-muted">経験値: <span id="explorer-exp">0</span> / <span id="explorer-next">100</span></small>
                                                <p class="mt-2 mb-0 small">探検できる範囲が広がり、新しいボスとの戦闘がアンロックされます</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card bg-secondary">
                                            <div class="card-body">
                                                <h6 class="card-title">📊 探検統計</h6>
                                                <div class="mb-2">アンロック済みボス: <span id="unlocked-bosses-count">3</span> / 9</div>
                                                <div class="mb-2">獲得記念品: <span id="total-trophies-count">0</span></div>
                                                <div class="mb-0">探検経験値総計: <span id="total-explorer-exp">0</span></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <h6>🗺️ 探検可能な地形</h6>
                                <div class="row mb-4">
                                    <div class="col-12">
                                        <div class="card bg-secondary">
                                            <div class="card-body">
                                                <h6 class="card-title">🌍 現在アクセス可能な地形</h6>
                                                <div id="accessible-terrains-container" class="d-flex flex-wrap gap-2">
                                                    <!-- Terrain badges will be dynamically populated here -->
                                                </div>
                                                <p class="mt-2 mb-0 small text-muted">エクスプローラーレベルを上げることで、より遠くの未知の地形に足を踏み入れることができます。</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <h6>🏆 記念品コレクション</h6>
                                <div id="trophies-collection" class="row">
                                    <!-- Trophy cards will be dynamically populated here -->
                                </div>
                                
                                <div class="text-center mt-3" id="no-trophies-message">
                                    <p class="text-muted">まだ記念品を獲得していません。<br>ボスとの戦闘で初回勝利や敗北を経験して記念品を集めましょう！</p>
                                </div>
                            </div>
                            
                            <!-- Data Management Panel -->
                            <div class="tab-pane fade" id="data-management-panel">
                                <h6>💾 データ管理</h6>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="card bg-secondary mb-3">
                                            <div class="card-body text-center">
                                                <h6 class="card-title">📤 データエクスポート</h6>
                                                <p class="card-text">セーブデータをファイルとして保存します</p>
                                                <button id="export-save-btn-modal" class="btn btn-outline-info w-100">
                                                    エクスポート
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card bg-secondary mb-3">
                                            <div class="card-body text-center">
                                                <h6 class="card-title">📥 データインポート</h6>
                                                <p class="card-text">セーブデータをファイルから読み込みます</p>
                                                <button id="import-save-btn-modal" class="btn btn-outline-success w-100">
                                                    インポート
                                                </button>
                                                <input type="file" id="import-file-input-modal" accept=".json" class="d-none">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card bg-secondary mb-3">
                                            <div class="card-body text-center">
                                                <h6 class="card-title">🗑️ データ削除</h6>
                                                <p class="card-text">全てのセーブデータを削除します</p>
                                                <button id="delete-save-btn-modal" class="btn btn-outline-danger w-100">
                                                    削除
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">閉じる</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Debug Modal -->
        <div class="modal fade" id="debug-modal" tabindex="-1">
            <div class="modal-dialog modal-xl">
                <div class="modal-content bg-dark">
                    <div class="modal-header">
                        <h5 class="modal-title text-warning">🔧 デバッグコンソール</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <!-- Player Debug Panel -->
                            <div class="col-md-6 mb-4">
                                <div class="card bg-primary">
                                    <div class="card-header">
                                        <h5 class="mb-0">🐍 プレイヤー</h5>
                                    </div>
                                    <div class="card-body">
                                        <!-- Player HP/MP -->
                                        <div class="row mb-3">
                                            <div class="col-6">
                                                <label class="form-label">HP</label>
                                                <input type="number" id="debug-player-hp" class="form-control" min="0">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label">最大HP</label>
                                                <input type="number" id="debug-player-max-hp" class="form-control" min="1">
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-6">
                                                <label class="form-label">MP</label>
                                                <input type="number" id="debug-player-mp" class="form-control" min="0">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label">最大MP</label>
                                                <input type="number" id="debug-player-max-mp" class="form-control" min="0">
                                            </div>
                                        </div>
                                        
                                        <!-- Status Effects -->
                                        <h6>ステータス効果</h6>
                                        <div id="debug-player-status-effects" class="mb-3">
                                            <!-- Status effects will be populated here -->
                                        </div>
                                        <button id="debug-add-player-status" class="btn btn-sm btn-outline-light">
                                            ステータス効果を追加
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Boss Debug Panel -->
                            <div class="col-md-6 mb-4">
                                <div class="card bg-danger">
                                    <div class="card-header">
                                        <h5 id="debug-boss-name" class="mb-0">👹 ボス</h5>
                                    </div>
                                    <div class="card-body">
                                        <!-- Boss HP -->
                                        <div class="row mb-3">
                                            <div class="col-6">
                                                <label class="form-label">HP</label>
                                                <input type="number" id="debug-boss-hp" class="form-control" min="0">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label">最大HP</label>
                                                <input type="number" id="debug-boss-max-hp" class="form-control" min="1">
                                            </div>
                                        </div>
                                        
                                        <!-- Status Effects -->
                                        <h6>ステータス効果</h6>
                                        <div id="debug-boss-status-effects" class="mb-3">
                                            <!-- Status effects will be populated here -->
                                        </div>
                                        <button id="debug-add-boss-status" class="btn btn-sm btn-outline-light">
                                            ステータス効果を追加
                                        </button>
                                        
                                        <!-- Custom Variables -->
                                        <h6 class="mt-4">カスタム変数</h6>
                                        <div id="debug-boss-custom-vars" class="mb-3">
                                            <!-- Custom variables will be populated here -->
                                        </div>
                                        <button id="debug-add-custom-var" class="btn btn-sm btn-outline-light">
                                            変数を追加
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
                        <button id="debug-apply-changes" class="btn btn-success">
                            ✅ 変更を適用
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container for notifications -->
    <div id="toast-container" class="toast-container position-fixed bottom-0 end-0 p-3"></div>

    <!-- Utility Modals -->
    <!-- Alert Modal -->
    <div class="modal fade" id="alert-modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="alert-modal-title">通知</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="alert-modal-body">
                    <!-- Alert message goes here -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div class="modal fade" id="confirm-modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirm-modal-title">確認</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="confirm-modal-body">
                    <!-- Confirm message goes here -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="confirm-cancel-btn">キャンセル</button>
                    <button type="button" class="btn btn-danger" id="confirm-ok-btn">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Prompt Modal -->
    <div class="modal fade" id="prompt-modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="prompt-modal-title">入力</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="prompt-modal-body" class="mb-3">
                        <!-- Prompt message goes here -->
                    </div>
                    <input type="text" class="form-control" id="prompt-modal-input" placeholder="入力してください">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="prompt-cancel-btn">キャンセル</button>
                    <button type="button" class="btn btn-primary" id="prompt-ok-btn">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Select Modal -->
    <div class="modal fade" id="select-modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="select-modal-title">選択</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="select-modal-body" class="mb-3">
                        <!-- Select message goes here -->
                    </div>
                    <select class="form-select" id="select-modal-select">
                        <!-- Options will be populated here -->
                    </select>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="select-cancel-btn">キャンセル</button>
                    <button type="button" class="btn btn-primary" id="select-ok-btn">選択</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Variable Add Modal -->
    <div class="modal fade" id="custom-var-modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">カスタム変数を追加</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="custom-var-error" class="alert alert-danger d-none mb-3" role="alert">
                        <!-- Error message will be displayed here -->
                    </div>
                    <div class="mb-3">
                        <label for="custom-var-key" class="form-label">変数名</label>
                        <input type="text" class="form-control" id="custom-var-key" placeholder="変数名を入力してください">
                    </div>
                    <div class="mb-3">
                        <label for="custom-var-value" class="form-label">値</label>
                        <input type="text" class="form-control" id="custom-var-value" placeholder="値を入力してください">
                        <div class="form-text">数値やtrue/falseは自動的に変換されます</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
                    <button type="button" class="btn btn-primary" id="custom-var-add-btn">追加</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Status Effect Add Modal -->
    <div class="modal fade" id="status-effect-modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="status-effect-modal-title">ステータス効果を追加</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="status-effect-error" class="alert alert-danger d-none mb-3" role="alert">
                        <!-- Error message will be displayed here -->
                    </div>
                    <div class="mb-3">
                        <label for="status-effect-type" class="form-label">ステータス効果</label>
                        <select class="form-select" id="status-effect-type">
                            <!-- Options will be populated here -->
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="status-effect-duration" class="form-label">持続ターン数</label>
                        <input type="number" class="form-control" id="status-effect-duration" value="3" min="1" max="99">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
                    <button type="button" class="btn btn-primary" id="status-effect-add-btn">追加</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>