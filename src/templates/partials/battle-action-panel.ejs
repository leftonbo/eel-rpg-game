<!-- Action Panel -->
<div class="col-md-4">
    <div class="card bg-secondary h-100">
        <div class="card-header">
            <h6 class="mb-0">行動選択</h6>
        </div>
        <div class="card-body">
            <!-- Basic Action Buttons -->
            <div id="action-buttons" class="d-grid gap-2">
                <button id="attack-btn" class="btn btn-danger">⚔️ 攻撃</button>
                <button id="defend-btn" class="btn btn-primary">🛡️ 防御</button>
                <button id="skill-btn" class="btn btn-warning">⚡ スキル</button>
                <button id="item-btn" class="btn btn-success">💊 アイテム</button>
            </div>

            <!-- Skill Panel -->
            <!-- Skill Panel (hidden by default) -->
            <div id="skill-panel" class="d-none mt-3">
                <h6>スキル</h6>
                <div class="d-grid gap-2">
                    <button
                        id="power-attack-btn"
                        class="btn btn-outline-danger"
                        title="2.5倍の攻撃力で確実に攻撃（20MP）"
                    >
                        💥 パワーアタック (20MP)
                    </button>
                    <button
                        id="heal-skill-btn"
                        class="btn btn-outline-success"
                        title="HPを100回復（30MP）"
                    >
                        ✨ ヒール (30MP)
                    </button>
                    <button
                        id="struggle-skill-btn"
                        class="btn btn-outline-warning"
                        title="拘束状態専用：脱出確率2倍（30MP）"
                    >
                        🔥 あばれる (30MP)
                    </button>
                    <button
                        id="ultra-smash-btn"
                        class="btn btn-outline-danger"
                        title="全力攻撃"
                    >
                        💀 ウルトラスマッシュ (MP全消費)
                    </button>
                    <button
                        id="skill-back-btn"
                        class="btn btn-outline-secondary"
                    >
                        戻る
                    </button>
                </div>
            </div>

            <!-- Item Panel -->
            <!-- Item Panel (hidden by default) -->
            <div id="item-panel" class="d-none mt-3">
                <h6>アイテム</h6>
                <div class="d-grid gap-2">
                    <button
                        id="heal-potion-btn"
                        class="btn btn-outline-success"
                        title="ヘルスを80%回復し、状態異常を解除する"
                    >
                        💊 回復薬 (<span id="heal-potion-count">9</span>)
                    </button>
                    <button
                        id="adrenaline-btn"
                        class="btn btn-outline-warning"
                        title="3ターンの間、無敵になる"
                    >
                        💉 アドレナリン注射 (<span id="adrenaline-count">3</span
                        >)
                    </button>
                    <button
                        id="energy-drink-btn"
                        class="btn btn-outline-info"
                        title="3ターンの間、MPが常に満タンになる"
                    >
                        ⚡ 元気ドリンク (<span id="energy-drink-count">3</span>)
                    </button>
                    <button
                        id="item-back-btn"
                        class="btn btn-outline-secondary"
                    >
                        戻る
                    </button>
                </div>
            </div>

            <!-- Special Actions Panel -->
            <!-- Special Actions Panel (for restrained state) -->
            <div id="special-actions" class="d-none">
                <div class="d-grid gap-2">
                    <button
                        id="struggle-btn"
                        class="btn btn-warning"
                        title="拘束から脱出を試みる（成功率は試行回数で上昇）"
                    >
                        💪 もがく
                    </button>
                    <button
                        id="struggle-skill-special-btn"
                        class="btn btn-outline-warning"
                        title="拘束状態専用：脱出確率2倍（30MP）"
                    >
                        🔥 あばれる (30MP)
                    </button>
                    <button
                        id="stay-still-btn"
                        class="btn btn-info"
                        title="体力を回復する（最大HPの5%）"
                    >
                        😌 じっとする
                    </button>
                    <button
                        id="give-up-btn"
                        class="btn btn-secondary"
                        title="何もしない"
                    >
                        ️💀 なすがまま
                    </button>
                    <!-- Omamori button will be dynamically inserted here -->
                    <div
                        id="omamori-special-container"
                        class="d-grid gap-2"
                    ></div>
                </div>
            </div>

            <!-- Battle End Panel -->
            <!-- Battle End Panel (for when battle is over) -->
            <div id="battle-end-actions" class="d-none">
                <div class="d-grid gap-2">
                    <button id="battle-end-btn" class="btn btn-success">
                        🎯 バトル終了
                    </button>
                </div>
            </div>

            <!-- Debug Button -->
            <!-- Debug Button (always visible when debug mode is on) -->
            <div id="debug-button-container" class="mt-2">
                <div class="d-grid gap-2">
                    <button
                        id="debug-btn"
                        class="btn btn-outline-info btn-sm d-none"
                    >
                        🔧 デバッグ
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
